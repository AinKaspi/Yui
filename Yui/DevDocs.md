Проект
Название проекта: Yui
Описание: Yui — фитнес-приложение, основанное на искусственном интеллекте с элементами RPG.
Инструменты и версии:
Xcode: 16+ (будем использовать Xcode 16.2, как указано ранее).
Фреймворк: UIKit (вместо SwiftUI, как было ранее).
MediaPipe: MediaPipeTasksVision 0.10.21.
Модель: pose_landmarker_full.task.
CocoaPods: POD 1.16.2.
Документация:
https://ai.google.dev/edge/mediapipe/solutions/vision/pose_landmarker/ios?hl=ru (официальная документация MediaPipe для iOS).
Структура приложения
Yui будет содержать 5 страниц (табов):

Профиль пользователя:
Имя.
Аватар.
Уровень.
Достижения.
Ежедневные задания:
Дейли-задания.
Получение ранга (E, D, C, B, A, S). При достижении определённого уровня можно сдать экзамен и получить ранг.
Выбор упражнения:
Страница с выбором упражнения.
При выборе упражнения запускается камера для отслеживания поз.
Статистика:
Ежедневная статистика.
Общая статистика.
Таблица рейтинга всех пользователей.
Магазин:
Возможность покупать скины, визуальные эффекты и звуки.
Дополнительные детали
Приложение будет использовать MediaPipe для отслеживания поз (с помощью pose_landmarker_full.task).
Мы будем интегрировать MediaPipe через CocoaPods (версия 1.16.2), так как Swift Package Manager вызвал проблемы с небезопасными флагами.
Интерфейс будет создан с использованием UIKit, а не SwiftUI, как указано в вашем новом запросе.

-----------

Архитектура приложения Yui
Выбор архитектурного подхода
Для приложения Yui я предлагаю использовать MVC (Model-View-Controller) с элементами MVVM (Model-View-ViewModel) для некоторых модулей, где это будет удобно. Вот почему:

MVC:
Это стандартная архитектура для UIKit-приложений, которая хорошо поддерживается в Storyboard.
Подходит для управления табами (UITabBarController) и навигацией между экранами.
Проста для реализации базовой структуры (модели, контроллеры, вью).
MVVM (для сложных модулей, например, страницы упражнений):
Позволит лучше разделить логику обработки данных (например, отслеживание поз через MediaPipe) и отображение (анимации, UI).
Удобно для работы с динамическими данными, такими как счётчик приседаний или статистика.
Структура приложения
1. Основные компоненты (MVC)
Model (Модели):
Отвечают за данные и бизнес-логику.
Примеры:
UserProfile: Хранит данные пользователя (имя, аватар, уровень, достижения).
DailyTask: Модель для ежедневных заданий (название, прогресс, статус).
Exercise: Модель упражнения (название, тип, параметры отслеживания).
Statistics: Данные статистики (ежедневная, общая, рейтинг).
StoreItem: Элемент магазина (скины, эффекты, звуки, цена).
View (Представления):
UIKit-компоненты, отображаемые на экране.
Реализуются через Storyboard (Main.storyboard) и кастомные вью (например, для анимаций).
Примеры:
ProfileViewController: Экран профиля.
DailyTasksViewController: Экран заданий.
ExerciseSelectionViewController: Экран выбора упражнений.
StatisticsViewController: Экран статистики.
StoreViewController: Экран магазина.
Controller (Контроллеры):
Управляют взаимодействием между моделями и представлениями.
Реализуются через UIViewController для каждого таба.
Примеры:
ProfileViewController: Обрабатывает данные профиля и отображает их.
ExerciseViewController: Управляет камерой, MediaPipe и анимациями.
2. Дополнительные компоненты (MVVM для страницы упражнений)
ViewModel (для страницы упражнений):
ExerciseViewModel:
Обрабатывает данные от MediaPipe (landmarks, сегментация).
Выполняет подсчёт приседаний/отжиманий.
Управляет анимациями (аура, подсветка ног) и звуками.
Связывает ExerciseViewController с данными, минимизируя логику в контроллере.
3. Навигация
UITabBarController:
Основной контроллер навигации, который управляет 5 табами:
Профиль.
Ежедневные задания.
Выбор упражнения.
Статистика.
Магазин.
Каждый таб будет представлен отдельным UIViewController.
4. Модули и сервисы
DataManager:
Отвечает за хранение и управление данными.
Использует UserDefaults для локального хранения (например, профиля, статистики).
В будущем может быть заменён на серверное API для рейтинга пользователей.
MediaPipeManager:
Отдельный сервис для работы с MediaPipe.
Инициализирует PoseLandmarker с моделью pose_landmarker_full.task.
Обрабатывает видео с камеры и возвращает landmarks и сегментацию.
AnimationManager:
Управляет анимациями (аура, подсветка ног).
Использует UIKit или SceneKit для рендеринга эффектов.
SoundManager:
Управляет звуками (например, проигрывание звука при завершении приседания).
Использует AVFoundation для воспроизведения.
5. Структура папок
Чтобы код был организован, мы создадим следующую структуру папок в проекте:
Yui/
├── Models/                     # Модели данных
│   ├── UserProfile.swift
│   ├── DailyTask.swift
│   ├── Exercise.swift
│   ├── Statistics.swift
│   └── StoreItem.swift
├── ViewControllers/            # Контроллеры для табов
│   ├── ProfileViewController.swift
│   ├── DailyTasksViewController.swift
│   ├── ExerciseSelectionViewController.swift
│   ├── ExerciseViewController.swift
│   ├── StatisticsViewController.swift
│   └── StoreViewController.swift
├── ViewModels/                 # ViewModel для сложных модулей
│   └── ExerciseViewModel.swift
├── Services/                   # Сервисы и менеджеры
│   ├── DataManager.swift
│   ├── MediaPipeManager.swift
│   ├── AnimationManager.swift
│   └── SoundManager.swift
├── Views/                      # Кастомные вью (если нужны)
│   └── ExerciseOverlayView.swift  # Для отображения анимаций
├── Resources/                  # Ресурсы
│   ├── pose_landmarker_full.task
│   ├── Sounds/                # Звуковые файлы
│   └── Assets.xcassets        # Изображения (аватары, иконки)
├── Storyboards/                # Storyboard-файлы
│   └── Main.storyboard
└── Supporting Files/           # Вспомогательные файлы
    ├── Info.plist
    └── AppDelegate.swift
6. Поток данных
Профиль:
DataManager загружает данные пользователя → ProfileViewController отображает их.
Ежедневные задания:
DataManager предоставляет список заданий → DailyTasksViewController отображает их и обновляет прогресс.
Упражнения:
ExerciseSelectionViewController показывает список упражнений.
При выборе упражнения открывается ExerciseViewController.
MediaPipeManager обрабатывает видео → ExerciseViewModel подсчитывает движения → AnimationManager и SoundManager добавляют эффекты.
Статистика:
DataManager предоставляет статистику → StatisticsViewController отображает её.
Магазин:
DataManager предоставляет список товаров → StoreViewController отображает их и обрабатывает покупки.
7. Зависимости
MediaPipeTasksVision 0.10.21:
Используется через CocoaPods для отслеживания поз и сегментации.
AVFoundation:
Для захвата видео с камеры и воспроизведения звуков.
SceneKit (опционально):
Для рендеринга сложных анимаций (например, ауры).
